:scrollbar:
:data-uri:
:toc2:
:imagesdir: images

= RHEL Webconsole - LTO Show & Tell Series

== Description
This Show&Tell is aimed to share some of the most important concepts and features of webconsole (a.k.a. cockpit) as the main control pane for managing RHEL 7 & RHEL 8.

Audience: IT Managers, Architects and technical staff who operates Linux

:numbered:

== The new challenges of the OS Management

With the proliferation of virtual machines and containers as an operating system standard features in conjunction with all the OS management related activities that a system administrator has to do in his every day life, sometimes a day could be horrific, not mentioning the error prone activities that repetitive tasks could mean.

The command line has been for decades the norm for administering Linux environments. Nevertheless, the command line could be daunting as far as labor is concerned, but also could lead to errors related to excesive confidence in combination with root priviledges.

This reality makes us think about better ways to execute the daily management work. A good practice a lot of system administrators are adopting is to combine command line activities with gui assited tools to handle the 80/20 paretto of management burden the operating systems demands.

This is where Webconsole comes to this picture.

== What is Webconsole

The Red Hat Enterprise Linux web console is an open source project called Cockpit that provides a user-friendly web interface allowing for the remote administration of servers. Being a web console, this also means that it is equally easy to use on mobile devices as well.

From https://cockpit-project.org[Cockpit Project] we can reference this:

"Discoverable: Cockpit makes GNU/Linux discoverable. See your server in a web browser and perform system tasks with a mouse. It’s easy to start containers, administer storage, configure networks, and inspect logs.

Designed & tested: Cockpit is designed with your goals in mind. We also routinely test Cockpit with usability studies to make it work the way you’d expect. As a result, Cockpit gets easier to use all the time.

Team-friendly: Cockpit is friendly enough for those new to Linux and useful for seasoned admins too.

Packages included: Installing and running Cockpit is simple. It’s already included in most of the major distributions."

== The extensible nature of WebConsole

Another great feature of Cockpit is that it is pluggable, which means functionality can be extended by additional plugins. Red Hat develops several pluggings that are official and supported.

cockpit-composer
cockpit-pcp.x86_64                
cockpit-session-recording
cockpit-dashboard
cockpit-machines
cockpit-podman
cockpit-storaged (Installed by default in RHEL 8)

== How to install Webconsole

The installation is as simple as install the cockpit package and open the ports needed to access the web application.

For RHEL 7 we must enable some repositories.

[source, bash]
--------------------------------
subscription-manager repos --enable=rhel-7-server-extras-rpms
subscription-manager repos --enable=rhel-7-server-optional-rpms
--------------------------------

Installing the cockpit package.

[source, bash]
--------------------------------
yum install cockpit
--------------------------------

Open ports and enable the service.

[source, bash]
--------------------------------
firewall-cmd --add-port=9090/tcp
firewall-cmd --add-port=9090/tcp --permanent
systemctl enable cockpit.socket
systemctl start cockpit.socket
--------------------------------

== A naive tour of the web interface

To access the web console we need to type https://ip-address:9090 on a browser (Chrome is good). After entering we need to approve the certificate then the first screen is going to appear for authentication.

image::login.png[]

Accessing the tool with a regular user should be done if that user is not expected to change nothing on the server. If changes are needed to complete actions then root or proviledged users should login.

Let´s enter with root user.

The system dashboard is the first screen you can see when accessing for the first time webconconsole. Here some performance metrics are shown, but you can also do some interesting stuff:

* Change the hostname 
* Join to a domain 
* Change the time or date or configure the connection to a ntp server
* Change the the server profile
* Power off or reboot the server

image::system.png[]

So, in this very first screen you can do a lot of things.

At the left menu there are several options.

* Logs

image::logs.png[Logs]

* Networking 

image::networking.png[Networking]

* Firewall

image::firewall.png[Firewall]

* Accounts

image::accounts.png[Accounts]

* Services

image::services.png[Services]

*  Diagnostic Report

image::sos.png[Diagnostic Report]

* Software updates

image::updates.png[Software Updates]

* Subscriptions

image::subscriptions.png[Subscriptions]

* Terminal 

image::terminal.png[Console]

== How to install a plugin for adding functionality to webconsole

For webconsole to extend its functionality it is need to install plugins. These plugins on RHEL are easy to find trought the bash auto completation feature that can be used when we use the the yum command.

[source, bash]
--------------------------
yum install cockpi- [tab]

cockpit-composer.noarch           cockpit-doc.noarch                cockpit-pcp.x86_64                cockpit-session-recording.noarch
cockpit-dashboard.noarch          cockpit-machines.noarch           cockpit-podman.noarch             cockpit-storaged.noarch
--------------------------

In the next section we will install a plugin for manage more than one server from the web console.

== How to manage several servers from one console

For manage several servers from one console we need to install cockpit-dashborad plugin.

[source, bash]
---------------------------
yum install cockpit-dashboard
---------------------------

Every plugin we install needs a restart of the cockpit.socket service to be recognized.

[source, bash]
---------------------------
systemctl restart cockpit.socket
---------------------------

After login in again on the browser you will see the left part of the screen divided with two options. The server icon holds the original screen from web console but now with the information of the active server.

The gauge icon is the new functionality added which is the dashboard. The dashboard able us to add as much as servers are needed.

Clicking the "plus" button we are going to add a server

image::addingServer.png[]

Giving the credentials we can add the server.

image::credentials.png[]

Then, in this exmaple, zeus is added to the list.

image::zeus.png[]

So, selecting now zeus we can go to screen where zeus will be shown to make management actios on.

image::zeusDetails.png[]

== How to record sessions using the session recording plugin

Another nice pluggin is the session recording one, which enable us to configure and magane all the sessions recorded on the server.

[source, bash]
---------------------------
yum install cockpit-session-recording
---------------------------

[source, bash]
---------------------------
systemctl restart cockpit.socket
---------------------------

After restarting the cockpit.socket service we will notice a "session recording menu entry at the left of the screen"

image::sessionRecording.png[]

To activate the recording we need to click on the gear icon located at the right-up corner of the screen, then in the sssd configuration section select "All" in the scope dropdown menu, followed by clicking the save button.

image::sessionRecordingConfig.png[]

After this configuration takes effect, all users that login to the server are going to be recorded when a ssh session is oppened. Then these sessions could be played-back.

image:sessionRecordingPlay.png[]

== Managing the Networking from Webconsole

=== Creating a Bonding Interface

Select the networking item on the WebConsole left menu. In this example the server is configured with 4 interfaces.

image::4ports.png[]

We are going to use esp0s9 + esp0s10 for creating bond0. Click the "Add Bond" button. configure like suggested on the image and click "Apply".

image::bondSettings.png[]

After applying the changes you will see the list of the configured interfaces which had to changed hiding interfaces esp0s9&esp0s10 and showing the newly created bond interface bond0 as dipected in the image.

image::bondingCreated.png[]

We can change the configuration of the bonding interface by selecting it from the list as shown in the following picture.

image::bondingModification.png[]

From command line we can see the newly created interface bond o using "ip route" command.

image::bondingFromCommandLine.png[]

=== Creating a Teaming Interface

We can also create a teaming interface, much in the same way as a bonding interface as depicted in the following pictures.

*Creating a Teaming interface*

image:teamingSettings.png[]

*team0 Teaming interface listed after creation*

image:teamingCreated.png[]

*Modifying a Teaming interface*

image:teamingModification.png[]

*List Teaming interface from command line*

image:teamingFromCommandLine.png[]

=== creating a Link Layer Bridge

The procedure for creating a bridge in the same as bonding & teaming. The bridge can be configured over a team or a bond interface previously created. This is used tipically for helping with the communication among virtual machines and a kypervisor.

image::bridgeTypical.png[]


== Managing disks and VDO using the console

== Managing Virtual Machines

== Managing containers

== Why is so important to have tools assisting the management

== Wrap-up





